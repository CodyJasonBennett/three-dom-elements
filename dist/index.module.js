import{PlaneGeometry as e,MeshBasicMaterial as t,NoBlending as s,DoubleSide as i,Vector3 as n,Quaternion as r,Mesh as o,PerspectiveCamera as a,Scene as c}from"three";import{CSS3DObject as h,CSS3DRenderer as d}from"three/examples/jsm/renderers/CSS3DRenderer.js";var m=function(o){var a,c;function d(a,c,d){var m,l=void 0===d?{}:d,p=l.elementWidth,u=void 0===p?768:p,b=l.width,f=void 0===b?1:b,v=l.height,y=void 0===v?.75:v,E=new e(f,y),w=new t({opacity:0,color:16777215,blending:s,side:i});return(m=o.call(this,E,w)||this).domElement=c,m.aspectRatio=y/f,m.elementWidth=u,m.elementHeight=m.elementWidth*m.aspectRatio,m.width=f,m.height=y,m.position=new n,m.scale=new n,m.quaternion=new r,m.resizeDomElement(),m.cssObject=new h(m.domElement),m.cssObject.scale.multiplyScalar(100/(m.elementWidth/m.width)),m.addEventListener("added",function(){return a.cssScene.add(m.cssObject)}),m.addEventListener("removed",function(){return a.cssScene.remove(m.cssObject)}),m.update=m.update.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(m)),m}c=o,(a=d).prototype=Object.create(c.prototype),a.prototype.constructor=a,a.__proto__=c;var m=d.prototype;return m.resizeDomElement=function(){this.domElement.style.width=this.elementWidth+"px",this.domElement.style.height=this.elementHeight+"px"},m.setDomElement=function(e){this.domElement.parentNode&&this.domElement.parentNode.removeChild(this.domElement),this.domElement=e,this.cssObject.element=e,this.resizeDomElement()},m.update=function(){this.updateMatrixWorld(),this.matrixWorld.decompose(this.position,this.quaternion,this.scale),this.cssObject.quaternion.copy(this.quaternion),this.cssObject.position.copy(this.position).multiplyScalar(100),this.cssObject.scale.multiplyScalar(100/(this.elementWidth/(this.geometry.parameters.width*this.scale.x))),this.cssObject.visible=this.visible},d}(o),l=function(){function e(e){this.enabled=!0,this.cssRenderer=new d,this.domElement=this.cssRenderer.domElement,this.cssCamera=new a(e.fov,e.aspect,100*e.near,100*e.far),this.camera=e,this.cssScene=new c,this.update=this.update.bind(this)}var t=e.prototype;return t.setSize=function(e,t){this.cssRenderer.setSize(e,t),this.cssCamera.aspect=e/t,this.cssCamera.updateProjectionMatrix()},t.update=function(){this.cssCamera.quaternion.copy(this.camera.quaternion),this.cssCamera.position.copy(this.camera.position).multiplyScalar(100),this.enabled&&this.cssScene.traverse(function(e){e.update&&e.update()}),this.cssRenderer.render(this.cssScene,this.cssCamera)},e}();export{l as DOMContext,m as DOMElement};
//# sourceMappingURL=index.module.js.map
