import{PlaneGeometry as e,MeshBasicMaterial as t,NoBlending as s,DoubleSide as i,Vector3 as n,Box3 as o,Mesh as r,PerspectiveCamera as h,Scene as d}from"three";import{CSS3DObject as c,CSS3DRenderer as a}from"three/examples/jsm/renderers/CSS3DRenderer";function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=100,p=function(r){var h,d;function a(h,d,a){var m,l=void 0===a?{}:a,p=l.elementWidth,u=void 0===p?768:p,v=l.width,b=void 0===v?1:v,f=l.height,E=void 0===f?.75:f,y=new e(b,E),j=new t({opacity:0,blending:s,side:i});return(m=r.call(this,y,j)||this).context=h,m.domElement=d,m.aspectRatio=E/b,m.elementWidth=u,m.elementHeight=m.elementWidth*m.aspectRatio,m.width=b,m.height=E,m.resizeElement(),m.cssObject=new c(m.domElement),m.cssObject.scale.multiplyScalar(100/(m.elementWidth/m.width)),m.size=new n,m.box=new o,m.addEventListener("added",m.handleAdded),m.addEventListener("removed",m.handleRemoved),m.update=m.update.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(m)),m}d=r,(h=a).prototype=Object.create(d.prototype),h.prototype.constructor=h,m(h,d);var l=a.prototype;return l.handleAdded=function(){this.context.cssScene.add(this.cssObject)},l.handleRemoved=function(){this.context.cssScene.remove(this.cssObject)},l.resizeElement=function(){this.domElement.style.width=this.elementWidth+"px",this.domElement.style.height=this.elementHeight+"px"},l.setElement=function(e){this.domElement.parentNode&&this.domElement.parentNode.removeChild(this.domElement),this.domElement=e,this.cssObject.element=e,this.resizeElement()},l.update=function(){this.updateMatrixWorld(),this.matrixWorld.decompose(this.position,this.quaternion,this.scale),this.cssObject.quaternion.copy(this.quaternion),this.cssObject.position.copy(this.position).multiplyScalar(100),this.box.setFromObject(this).getSize(this.size),this.cssObject.scale.multiplyScalar(100/(this.elementWidth/(this.size.x*this.scale.x))),this.cssObject.visible=this.visible},l.dispose=function(){this.removeEventListener("added",this.handleAdded),this.removeEventListener("removed",this.handleRemoved),this.domElement.remove(),this.geometry.dispose(),this.material.dispose()},a}(r),u=function(){function e(e){this.enabled=!0,this.cssRenderer=new a,this.domElement=this.cssRenderer.domElement,this.cssCamera=new h(e.fov,e.aspect,100*e.near,100*e.far),this.camera=e,this.cssScene=new d,this.update=this.update.bind(this)}var t=e.prototype;return t.setSize=function(e,t){this.cssRenderer.setSize(e,t),this.cssCamera.aspect=e/t,this.cssCamera.updateProjectionMatrix()},t.update=function(){this.cssCamera.quaternion.copy(this.camera.quaternion),this.cssCamera.position.copy(this.camera.position).multiplyScalar(100),this.enabled&&this.cssScene.traverse(function(e){e.update&&e.update()}),this.cssRenderer.render(this.cssScene,this.cssCamera)},e}();export{u as DOMContext,p as DOMElement,l as cssFactor};
//# sourceMappingURL=index.modern.module.js.map
