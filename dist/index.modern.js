import{PerspectiveCamera as e,Scene as t,Mesh as s,PlaneGeometry as i,MeshBasicMaterial as h,NoBlending as n,DoubleSide as a,Vector3 as r,Quaternion as c}from"three";import{CSS3DRenderer as m,CSS3DObject as d}from"three/examples/jsm/renderers/CSS3DRenderer.js";class o{constructor(s){this.enabled=!0,this.cssRenderer=new m,this.domElement=this.cssRenderer.domElement,this.cssCamera=new e(s.fov,s.aspect,100*s.near,100*s.far),this.camera=s,this.cssScene=new t,this.update=this.update.bind(this)}setSize(e,t){this.cssRenderer.setSize(e,t),this.cssCamera.aspect=e/t,this.cssCamera.updateProjectionMatrix()}update(){this.cssCamera.quaternion.copy(this.camera.quaternion),this.cssCamera.position.copy(this.camera.position).multiplyScalar(100),this.enabled&&this.cssScene.traverse(e=>{e.update&&e.update()}),this.cssRenderer.render(this.cssScene,this.cssCamera)}}class l extends s{constructor(e,t,{elementWidth:s=768,width:r=1,height:c=.75}={}){super(new i(r,c),new h({opacity:0,color:16777215,blending:n,side:a})),this.domElement=t,this.aspectRatio=c/r,this.elementWidth=s,this.elementHeight=this.elementWidth*this.aspectRatio,this.width=r,this.height=c,this.resizeDomElement(),this.cssObject=new d(this.domElement),this.cssObject.scale.multiplyScalar(100/(this.elementWidth/this.width)),this.addEventListener("added",()=>e.cssScene.add(this.cssObject)),this.addEventListener("removed",()=>e.cssScene.remove(this.cssObject)),this.update=this.update.bind(this)}resizeDomElement(){this.domElement.style.width=this.elementWidth+"px",this.domElement.style.height=this.elementHeight+"px"}setDomElement(e){this.domElement.parentNode&&this.domElement.parentNode.removeChild(this.domElement),this.domElement=e,this.cssObject.element=e,this.resizeDomElement()}update(){this.updateMatrixWorld();const e=this.matrixWorld,t=new r,s=new r,i=new c;e.decompose(t,i,s),this.cssObject.quaternion.copy(i),this.cssObject.position.copy(t).multiplyScalar(100),this.cssObject.scale.multiplyScalar(100/(this.elementWidth/(this.geometry.parameters.width*s.x)))}}export{o as DOMContext,l as DOMElement};
//# sourceMappingURL=index.modern.js.map
